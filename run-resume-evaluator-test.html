<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Evaluator Test Runner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
        #output {
            margin-top: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            min-height: 100px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Resume Evaluator Test Runner</h1>
        
        <div class="test-section">
            <h2>Test Resume Evaluator</h2>
            <p>This will test the resume evaluator functionality.</p>
            <button id="runTest">Run Tests</button>
            <button id="clearLog">Clear Log</button>
        </div>
        
        <div class="test-section">
            <h3>Test Output</h3>
            <div id="output">Click 'Run Tests' to start testing...</div>
        </div>
    </div>

    <!-- Include required scripts -->
    <script src="js/client-resume-evaluator.js"></script>
    <script>
        const output = document.getElementById('output');
        const runTestBtn = document.getElementById('runTest');
        const clearLogBtn = document.getElementById('clearLog');
        
        // Initialize the evaluator
        let evaluator;
        
        // Log messages to the output div
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = type;
            logEntry.textContent = `[${timestamp}] ${message}`;
            output.appendChild(logEntry);
            output.scrollTop = output.scrollHeight;
            console[type === 'error' ? 'error' : 'log'](message);
        }
        
        // Clear the log
        function clearLog() {
            output.innerHTML = '';
            log('Log cleared. Ready for new tests...');
        }
        
        // Test 1: Check if ClientResumeEvaluator is available
        function testEvaluatorAvailability() {
            log('Testing if ClientResumeEvaluator is available...');
            if (typeof ClientResumeEvaluator === 'function') {
                log('‚úÖ ClientResumeEvaluator is available', 'success');
                return true;
            } else {
                log('‚ùå ClientResumeEvaluator is not available', 'error');
                return false;
            }
        }
        
        // Test 2: Create an instance of the evaluator
        function testEvaluatorInitialization() {
            log('Initializing ClientResumeEvaluator...');
            try {
                evaluator = new ClientResumeEvaluator();
                log('‚úÖ ClientResumeEvaluator initialized successfully', 'success');
                return true;
            } catch (error) {
                log(`‚ùå Failed to initialize ClientResumeEvaluator: ${error.message}`, 'error');
                return false;
            }
        }
        
        // Test 3: Test basic resume evaluation
        async function testBasicEvaluation() {
            log('\n--- Starting Enhanced Resume Evaluation Test ---');
            
            const testResume = `John Doe
Senior Full Stack Developer
üìß john.doe@example.com | üìû (123) 456-7890 | üåê linkedin.com/in/johndoe

TECHNICAL SUMMARY
‚Ä¢ Full Stack Development: 5+ years in JavaScript, TypeScript, Node.js, React
‚Ä¢ Cloud & DevOps: AWS (EC2, S3, Lambda), Docker, Kubernetes, CI/CD Pipelines
‚Ä¢ Additional Technologies: Azure, GCP, Python, GraphQL, RESTful APIs
‚Ä¢ Methodologies: Agile/Scrum, TDD, Microservices Architecture

PROFESSIONAL EXPERIENCE

Senior Software Engineer | Tech Company Inc. | 2020 - Present
‚Ä¢ Led a team of 5 developers in building a customer-facing web application using React and Node.js, improving user engagement by 40%
‚Ä¢ Designed and implemented CI/CD pipelines using GitHub Actions and Docker, reducing deployment time by 60%
‚Ä¢ Migrated legacy systems to AWS cloud infrastructure, cutting operational costs by 35%
‚Ä¢ Mentored 3 junior developers, improving team productivity by 25%
‚Ä¢ Implemented Kubernetes for container orchestration, achieving 99.9% uptime

Software Engineer | Previous Company | 2018 - 2020
‚Ä¢ Developed RESTful APIs using Node.js and Express, handling 10,000+ daily requests
‚Ä¢ Integrated Azure services for enhanced application scalability and reliability
‚Ä¢ Reduced API response time by 45% through performance optimization

TECHNICAL SKILLS
‚Ä¢ Languages: JavaScript, TypeScript, Python, Java
‚Ä¢ Frontend: React, Redux, HTML5, CSS3, Tailwind CSS
‚Ä¢ Backend: Node.js, Express, Django
‚Ä¢ Cloud: AWS, Azure, GCP, Docker, Kubernetes
‚Ä¢ Databases: MongoDB, PostgreSQL, Redis
‚Ä¢ Tools: Git, GitHub Actions, Jenkins, Jira

EDUCATION
B.S. in Computer Science
State University | 2015 - 2019
‚Ä¢ GPA: 3.7/4.0
‚Ä¢ Relevant Coursework: Cloud Computing, Data Structures, Algorithms

CERTIFICATIONS
‚Ä¢ AWS Certified Solutions Architect - Associate
‚Ä¢ Microsoft Certified: Azure Developer Associate
‚Ä¢ Google Cloud Professional Cloud Architect (In Progress)

PROJECTS
Cloud Migration Project
‚Ä¢ Led migration of on-premises infrastructure to AWS, reducing costs by 40%
‚Ä¢ Implemented auto-scaling and load balancing for high availability

E-commerce Platform
‚Ä¢ Built a full-stack e-commerce site using MERN stack
‚Ä¢ Integrated payment gateways and implemented JWT authentication`;

            const testJob = `We are looking for a Senior Full Stack Developer with:
- 5+ years of experience in JavaScript and Node.js
- Strong experience with React and modern frontend frameworks
- Experience with cloud platforms (AWS/Azure/GCP)
- Knowledge of containerization and orchestration (Docker, Kubernetes)
- Experience with CI/CD pipelines
- Strong problem-solving skills and ability to work in Agile teams`;

            log('Running evaluation with sample resume and job description...');
            
            try {
                if (!evaluator || typeof evaluator.evaluateResume !== 'function') {
                    throw new Error('Evaluator not properly initialized');
                }
                
                const result = await evaluator.evaluateResume(testResume, testJob);
                
                // Log basic results
                log('‚úÖ Evaluation completed successfully', 'success');
                log('\n--- Evaluation Results ---', 'info');
                log(`Total Score: ${result.total_score || 'N/A'}%`);
                log(`Skills Match: ${result.skills_score || 'N/A'}%`);
                log(`Experience Match: ${result.experience_score || 'N/A'}%`);
                
                // Log matched keywords if available
                if (result.matched_keywords && result.matched_keywords.length > 0) {
                    log(`\n‚úÖ Matched Keywords (${result.matched_keywords.length}): ${result.matched_keywords.join(', ')}`, 'success');
                }
                
                // Log missing keywords if available
                if (result.missing_keywords && result.missing_keywords.length > 0) {
                    log(`‚ö†Ô∏è Missing Keywords (${result.missing_keywords.length}): ${result.missing_keywords.join(', ')}`, 'warning');
                }
                
                // Log ATS score if available
                if (result.ats_analysis) {
                    log(`\nüìä ATS Analysis: ${result.ats_analysis.overall_score || 'N/A'}%`, 'info');
                }
                
                // Log salary estimate if available
                if (result.salary_estimate) {
                    const range = result.salary_estimate.estimated_range;
                    log(`üí∞ Estimated Salary: $${range?.min?.toLocaleString() || 'N/A'} - $${range?.max?.toLocaleString() || 'N/A'}`, 'info');
                }
                
                return true;
                
            } catch (error) {
                log(`‚ùå Evaluation failed: ${error.message}`, 'error');
                console.error('Evaluation error:', error);
                return false;
            }
        }
        
        // Run all tests
        async function runAllTests() {
            clearLog();
            log('üöÄ Starting Resume Evaluator Tests...');
            
            // Test 1: Check if evaluator is available
            const isAvailable = testEvaluatorAvailability();
            if (!isAvailable) return;
            
            // Test 2: Initialize the evaluator
            const isInitialized = testEvaluatorInitialization();
            if (!isInitialized) return;
            
            // Test 3: Run basic evaluation
            await testBasicEvaluation();
            
            log('\nüéâ All tests completed!');
        }
        
        // Event listeners
        runTestBtn.addEventListener('click', runAllTests);
        clearLogBtn.addEventListener('click', clearLog);
        
        // Initial log
        clearLog();
    </script>
</body>
</html>
